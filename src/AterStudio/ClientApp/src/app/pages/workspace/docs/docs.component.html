<div *ngIf="!isLoading">
  <mat-toolbar>
    <mat-form-field appearance="fill">
      <mat-select placeholder="选择接口" [(ngModel)]="currentDoc" (selectionChange)="getDocContent()">
        <mat-option *ngFor="let item of docs" [value]="item">
          {{item.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <span>
      <button mat-icon-button matTooltip="添加文档" color="primary" (click)="openAddDocDialog()">
        <mat-icon>note_add</mat-icon>
      </button>
      <button *ngIf="docs.length>0" mat-icon-button matTooltip="删除文档" color="warn" (click)="delete()">
        <mat-icon>delete</mat-icon>
      </button>
    </span>

    <span class="example-spacer"></span>
    <!-- 手动更新 -->
    <button mat-icon-button matTooltip="刷新文档" color="primary" [disabled]="!isRefresh" (click)="refresh()">
      <mat-icon>refresh</mat-icon>
    </button>

    <!-- authorize配置, header头及值 -->
  </mat-toolbar>
  <!-- 左边接口树型列表 -->
  <!-- 搜索 -->
  <!-- 优先描述 -->
  <div class="d-flex">
    <div class="col col-auto">
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel hideToggle [expanded]="true" *ngFor="let group of restApiGroups">
          <mat-expansion-panel-header>
            <!-- 控制器名(Tag)/描述 -->
            <mat-panel-title>
              <span>{{group.name}} {{group.description}}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list *ngFor="let api of group.apiInfos" style="margin:0;padding:0">
            <!-- [请求方法] 描述(Route) -->
            <a mat-list-item class="api-item d-flex" [matTooltip]="getApiTip(api)">
              <div class="request-type" [style.color]="getApiTypeColor(api.operationType!)">
                {{OperationType[api.operationType!].substring(0,1)}}
              </div>
              <div class="d-flex flex-column">
                <span>{{api.summary??api.router}}</span>
              </div>

            </a>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <div class=" col">


    </div>

  </div>



  <!-- 右边内容 -->
  <!-- 请求方法
路由地址
描述

-->
</div>
<ng-template #addDocDialog>
  <h2 mat-dialog-title>添加 swagger 接口文档</h2>
  <mat-dialog-content>
    <form [formGroup]="addForm" class="d-flex flex-column">
      <mat-form-field>
        <mat-label>名称</mat-label>
        <input matInput placeholder="文档名称" formControlName="name" required>
      </mat-form-field>
      <mat-form-field>
        <mat-label>描述</mat-label>
        <input matInput placeholder="描述" formControlName="description">
      </mat-form-field>
      <mat-form-field>
        <mat-label>路径</mat-label>
        <input matInput placeholder="swagger.json地址，支持url及本地路径" formControlName="path" required>
      </mat-form-field>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button mat-dialog-close>取消</button>
    <button mat-button (click)="addDoc()" color="primary" [disabled]="isOccupying">添加</button>
  </mat-dialog-actions>
</ng-template>